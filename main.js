!function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function s(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t){e.appendChild(t)}function c(e){e.parentNode.removeChild(e)}function a(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function l(){return u(" ")}function p(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function f(e,t){e.value=null==t?"":t}let d;function h(e){d=e}const m=[],g=[],y=[],v=[],b=Promise.resolve();let $=!1;function w(e){y.push(e)}let x=!1;const E=new Set;function _(){if(!x){x=!0;do{for(let e=0;e<m.length;e+=1){const t=m[e];h(t),N(t.$$)}for(h(null),m.length=0;g.length;)g.pop()();for(let e=0;e<y.length;e+=1){const t=y[e];E.has(t)||(E.add(t),t())}y.length=0}while(m.length);for(;v.length;)v.pop()();$=!1,x=!1,E.clear()}}function N(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(w)}}const z=new Set;function k(e,t){-1===e.$$.dirty[0]&&(m.push(e),$||($=!0,b.then(_)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function T(o,i,a,u,l,p,f=[-1]){const m=d;h(o);const g=o.$$={fragment:null,ctx:null,props:p,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(m?m.$$.context:i.context||[]),callbacks:n(),dirty:f,skip_bound:!1};let y=!1;if(g.ctx=a?a(o,i.props||{},((e,t,...n)=>{const r=n.length?n[0]:t;return g.ctx&&l(g.ctx[e],g.ctx[e]=r)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](r),y&&k(o,e)),t})):[],g.update(),y=!0,r(g.before_update),g.fragment=!!u&&u(g.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);g.fragment&&g.fragment.l(e),e.forEach(c)}else g.fragment&&g.fragment.c();i.intro&&((v=o.$$.fragment)&&v.i&&(z.delete(v),v.i(b))),function(e,n,o,i){const{fragment:c,on_mount:a,on_destroy:u,after_update:l}=e.$$;c&&c.m(n,o),i||w((()=>{const n=a.map(t).filter(s);u?u.push(...n):r(n),e.$$.on_mount=[]})),l.forEach(w)}(o,i.target,i.anchor,i.customElement),_()}var v,b;h(m)}function A(e){var t,n;const r=[new I("-",2),new I("+",2),new I("add_percentage",2),new I("sub_percentage",2),new I("/",3),new I("*",3),new I("^",4)],s=function(e){e=e.replace(/\s/gi,"").replace(/[xX]/gi,"*").replace(/[^+-/*^\d().%]/g,"").replace(/\+([\d.]+)%(?![*/%(\d])/gi,"add_percentage$1").replace(/-([\d.]+)%(?![*/%(\d])/gi,"sub_percentage$1").replace(/%([\d(])/gi,"/100*$1").replace(/%/gi,"/100").replace(/,/g,"");const t=["-","+","/","*","^","%","(",")"],n=[];let r="";for(let s=0;s<e.length;s++){const o=e[s],i=e[s+1]||"";switch(r+=o,!0){case!isNaN(Number(r))&&Number.isFinite(Number(r))&&isNaN(Number(i))&&"."!==i:n.push(Number(r)),r="";break;case-1!==t.indexOf(r):n.push(r),r="";break;case"add_percentage"===r:case"sub_percentage"===r:n.push(r),r=""}}r&&n.push(r);return n}(e),o=new S,i=new C;for(let e=0;e<s.length;e++){const c=s[e],a=r.find((e=>e.fn===c));if(isNaN(Number(c))){if(a){if(e===s.length-1)break;for(;!i.isEmpty()&&"("!==i.top()&&((null===(t=r.find((e=>e.fn===i.top())))||void 0===t?void 0:t.hasGreaterPrecedenceThan(a))||(null===(n=r.find((e=>e.fn===i.top())))||void 0===n?void 0:n.hasSamePrecedenceTo(a))&&a.isLeftAssociative());)o.push(i.pop());i.push(a.fn)}else if("("===c)i.push("(");else if(")"===c){for(;!i.isEmpty()&&"("!==i.top();)o.push(i.pop());if("("===i.top())i.pop();else if(i.isEmpty())throw new Error('Missing "("')}}else o.push(c)}for(;!i.isEmpty();){if("("===i.top()||")"===i.top())throw new Error(`Mismatch "${i.top()}"`);o.push(i.pop())}const c=new C,a=Number(o.pop());if(isNaN(a))throw new Error("First value should be a numeric value");for(c.push(a);!o.isEmpty();){const e=o.pop();if(!isNaN(Number(e))&&isFinite(Number(e)))c.push(Number(e));else{const t=new I(e,1),n=c.pop(),r=c.pop(),s=t.calculate(r,n);isNaN(s)?console.error(`Invalid value: ${s}`):c.push(s)}}if(c.length()>1)throw new Error("Missing operators.");return c.pop()}class I{constructor(e,t){switch(this.fn=e,this.precedence=t,e){case"-":case"+":case"*":case"/":case"add_percentage":case"sub_percentage":this.associativity=I.LEFT_ASSOCIATIVE;break;case"^":this.associativity=I.RIGHT_ASSOCIATIVE;break;default:throw new Error(`Unknown operator ${e}`)}}hasGreaterPrecedenceThan(e){return this.precedence>e.precedence}hasSamePrecedenceTo(e){return this.precedence===e.precedence}isLeftAssociative(){return this.associativity===I.LEFT_ASSOCIATIVE}calculate(e,t){switch(this.fn){case"+":return(e||0)+(t||0);case"-":return(e||0)-(t||0);case"add_percentage":return(e||0)+(e||0)*(t||0)/100;case"sub_percentage":return(e||0)-(e||0)*(t||0)/100;case"*":return(void 0!==e?e:1)*(void 0!==t?t:1);case"/":if(0===t)throw new Error(`Can not divide ${e} by zero`);return(void 0!==e?e:1)/(t||1);case"^":if(0===e&&0===t)throw new Error("0^0 is not a numeric value");return Math.pow(void 0!==e?e:1,void 0!==t?t:1)}}}I.LEFT_ASSOCIATIVE=0,I.RIGHT_ASSOCIATIVE=1;class S{constructor(){this.items=[]}push(e){this.items.push(e)}pop(){const e=this.items.shift();if(!e)throw new Error("Queue is empty");return e}isEmpty(){return 0===this.items.length}}class C{constructor(){this.items=[]}push(e){this.items.push(e)}pop(){return this.items.splice(-1)[0]}top(){return this.items[this.items.length-1]}length(){return this.items.length}isEmpty(){return 0===this.items.length}}function O(t){let n,r,s,o,d,h,m,g,y,v,b,$,w,x,E;return{c(){n=a("div"),r=a("div"),r.innerHTML='<h1>Evaluate Numeric Expressions (Playground)</h1> \n    <a href="https://github.com/craftsys/eval-num-expr">GitHub</a>',s=l(),o=a("div"),d=a("div"),h=a("div"),m=a("label"),m.textContent="Expressions",g=l(),y=a("input"),v=l(),b=a("h2"),$=u("Value: "),w=u(t[1]),p(r,"class","p-4 svelte-1f5y2zm"),p(m,"for","string"),p(y,"id","string"),p(y,"type","text"),p(y,"class","block w-full p-4 text-lg outline-none rounded-lg border svelte-1f5y2zm"),p(y,"placeholder","1 + 10 x 1000 / 20"),p(h,"class","flex-1 pr-4 svelte-1f5y2zm"),p(d,"class","flex svelte-1f5y2zm"),p(o,"class","p-4 svelte-1f5y2zm"),p(n,"class","max-w-sm mx-auto svelte-1f5y2zm")},m(e,c){var a,u,l,p;!function(e,t,n){e.insertBefore(t,n||null)}(e,n,c),i(n,r),i(n,s),i(n,o),i(o,d),i(d,h),i(h,m),i(h,g),i(h,y),f(y,t[0]),i(o,v),i(o,b),i(b,$),i(b,w),x||(a=y,u="input",l=t[2],a.addEventListener(u,l,p),E=()=>a.removeEventListener(u,l,p),x=!0)},p(e,[t]){1&t&&y.value!==e[0]&&f(y,e[0]),2&t&&function(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}(w,e[1])},i:e,o:e,d(e){e&&c(n),x=!1,E()}}}function L(e,t,n){let r,s;return e.$$.update=()=>{1&e.$$.dirty&&n(1,s=r?function(e){try{return`${A(e)}`}catch(e){return e.message}}(r):"")},n(0,r=""),[r,s,function(){r=this.value,n(0,r)}]}new class extends class{$destroy(){!function(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}{constructor(e){var t;super(),document.getElementById("svelte-1f5y2zm-style")||((t=a("style")).id="svelte-1f5y2zm-style",t.textContent=".outline-none.svelte-1f5y2zm{outline:none !important}.block.svelte-1f5y2zm{display:block}.flex.svelte-1f5y2zm{display:flex}.flex-1.svelte-1f5y2zm{flex:1}.w-full.svelte-1f5y2zm{width:100%}.p-4.svelte-1f5y2zm{padding:1rem}.pr-4.svelte-1f5y2zm{padding-right:1rem}.text-lg.svelte-1f5y2zm{font-size:1.25rem}.max-w-sm.svelte-1f5y2zm{max-width:756px}.mx-auto.svelte-1f5y2zm{margin-left:auto;margin-right:auto}.rounded-lg.svelte-1f5y2zm{border-radius:1rem}.border.svelte-1f5y2zm{border:2px solid black}",i(document.head,t)),T(this,e,L,O,o,{})}}({target:document.getElementById("root")})}();
//# sourceMappingURL=main.js.map
